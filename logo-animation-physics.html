<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dristix Logo - Physics Animation</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f5f5f5;
            font-family: system-ui, -apple-system, sans-serif;
        }
        #canvas-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 20px;
        }
        .controls {
            margin-top: 24px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        .controls label {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }
        .controls input[type="range"] {
            width: 200px;
            cursor: pointer;
        }
        .speed-value {
            font-size: 12px;
            color: #999;
            min-width: 60px;
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <canvas id="physics-canvas"></canvas>
    </div>

    <div class="controls">
        <label for="speed-slider">Rotation Speed</label>
        <input type="range" id="speed-slider" min="0" max="40" value="10">
        <span class="speed-value" id="speed-display">0.005</span>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <script>
        // Matter.js module aliases
        const { Engine, Render, Bodies, Body, Composite, Runner, Events } = Matter;

        // Configuration
        const canvasSize = 300;
        const containerSize = 200;
        const wallThickness = 6;
        const cubeSize = 40;
        const centerX = canvasSize / 2;
        const centerY = canvasSize / 2;

        // Create engine
        const engine = Engine.create();
        engine.gravity.y = 1;
        engine.gravity.x = 0;

        // Create renderer
        const canvas = document.getElementById('physics-canvas');
        const render = Render.create({
            canvas: canvas,
            engine: engine,
            options: {
                width: canvasSize,
                height: canvasSize,
                wireframes: false,
                background: '#ffffff'
            }
        });

        // Wall positions relative to center
        const halfContainer = containerSize / 2;
        const halfWall = wallThickness / 2;

        // Create walls (static bodies)
        const wallOptions = {
            isStatic: true,
            render: {
                fillStyle: '#1a1a1a'
            },
            friction: 0.8,
            restitution: 0.2
        };

        const topWall = Bodies.rectangle(centerX, centerY - halfContainer + halfWall, containerSize, wallThickness, wallOptions);
        const bottomWall = Bodies.rectangle(centerX, centerY + halfContainer - halfWall, containerSize, wallThickness, wallOptions);
        const leftWall = Bodies.rectangle(centerX - halfContainer + halfWall, centerY, wallThickness, containerSize, wallOptions);
        const rightWall = Bodies.rectangle(centerX + halfContainer - halfWall, centerY, wallThickness, containerSize, wallOptions);

        const walls = [topWall, bottomWall, leftWall, rightWall];

        // Create the blue cube
        const cube = Bodies.rectangle(centerX, centerY - 30, cubeSize, cubeSize, {
            render: {
                fillStyle: '#3caceb'
            },
            friction: 0.6,
            restitution: 0.3,
            frictionAir: 0.01
        });

        // Add all bodies to the world
        Composite.add(engine.world, [...walls, cube]);

        // Rotation speed (radians per frame)
        let rotationSpeed = 0.005;

        // Current rotation angle
        let currentAngle = 0;

        // Slider control
        const slider = document.getElementById('speed-slider');
        const speedDisplay = document.getElementById('speed-display');

        slider.addEventListener('input', (e) => {
            rotationSpeed = e.target.value / 2000;
            speedDisplay.textContent = rotationSpeed.toFixed(4);
        });

        // Custom render loop for rotating walls
        function rotateWalls(angle) {
            walls.forEach(wall => {
                // Calculate wall's position relative to center
                const dx = wall.position.x - centerX;
                const dy = wall.position.y - centerY;

                // Rotate position around center
                const cos = Math.cos(angle);
                const sin = Math.sin(angle);
                const newX = centerX + (dx * cos - dy * sin);
                const newY = centerY + (dx * sin + dy * cos);

                // Set new position and angle
                Body.setPosition(wall, { x: newX, y: newY });
                Body.setAngle(wall, wall.angle + angle);
            });
        }

        // Animation loop
        function animate() {
            // Rotate walls
            rotateWalls(rotationSpeed);
            currentAngle += rotationSpeed;

            // Keep cube inside bounds (safety check)
            const dx = cube.position.x - centerX;
            const dy = cube.position.y - centerY;
            const dist = Math.sqrt(dx * dx + dy * dy);
            if (dist > containerSize * 0.8) {
                Body.setPosition(cube, { x: centerX, y: centerY });
                Body.setVelocity(cube, { x: 0, y: 0 });
            }

            // Update physics
            Engine.update(engine, 1000 / 60);

            requestAnimationFrame(animate);
        }

        // Start rendering and animation
        Render.run(render);
        animate();
    </script>
</body>
</html>
